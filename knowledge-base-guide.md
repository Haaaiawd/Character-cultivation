# 修仙知识库构建指南

## 知识库概述

知识库是RAG系统的核心组成部分，为AI提供生成剧情和选择项的知识基础。一个良好构建的知识库能够确保生成内容的一致性、丰富性和符合修仙世界观的正确性。

## 知识库目录结构

```
knowledge_base/
├── cultivation/                  # 修炼体系
│   ├── stages.md                # 境界体系
│   ├── techniques.md            # 修炼功法
│   ├── resources.md             # 修炼资源
│   └── breakthroughs.md         # 突破机制
├── world/                        # 世界观
│   ├── geography.md             # 地理环境
│   ├── history.md               # 历史背景
│   ├── cosmology.md             # 宇宙观
│   └── factions.md              # 门派势力
├── characters/                   # 角色
│   ├── identities.md            # 身份背景
│   ├── npcs.md                  # 重要NPC
│   ├── monsters.md              # 妖兽异兽
│   └── relationships.md         # 关系网络
├── items/                        # 物品
│   ├── artifacts.md             # 法宝
│   ├── medicines.md             # 丹药
│   ├── materials.md             # 材料
│   └── treasures.md             # 奇珍异宝
└── events/                       # 事件
    ├── adventures.md            # 冒险事件
    ├── encounters.md            # 奇遇
    ├── disasters.md             # 灾难
    └── ceremonies.md            # 仪式活动
```

## 文档格式标准

为了确保知识库的一致性和可检索性，所有文档应遵循以下格式标准：

### 文档元数据
每个文档开头必须包含元数据区域，用于标记文档类别、关键词和重要属性：

```markdown
---
title: 修仙境界体系
category: cultivation
keywords: [境界, 修为, 突破, 瓶颈, 修士]
importance: high
last_updated: 2025-06-17
---
```

### 分段和标题
使用Markdown标准标题格式，保持层次清晰：

```markdown
# 主标题
## 二级标题
### 三级标题
#### 四级标题
```

### 内容标签
为便于AI检索特定类型的信息，使用特殊标签标记内容类型：

```markdown
#定义# 元婴期：修真者凝聚元婴的阶段，元婴可独立于肉身存在。

#描述# 元婴期的修士已经初步脱离凡胎，神识强大，可瞬息千里。

#示例# 南山剑宗的掌门谢青云，百年前突破元婴，一剑开山，威震四方。
```

## 核心知识内容

### 1. 修炼体系 (cultivation/stages.md)

```markdown
---
title: 修仙境界体系
category: cultivation
keywords: [境界, 修为, 突破, 瓶颈, 修士]
importance: high
last_updated: 2025-06-17
---

# 修仙境界体系

修仙之路漫长而艰辛，修士需逐步突破不同境界，每一次突破都是对天地法则的进一步领悟，对自身的再造。

## 凡人境界

### 炼气期
#定义# 炼气期：修仙的入门阶段，修士开始接触灵气，打通经脉，建立根基。
#描述# 分为炼气一层至九层，修士开始感知天地灵气，引导入体，淬炼己身。此阶段凡人体魄开始发生质变，寿命略有延长，体质增强。
#特点# 可使用简单法术，灵力有限，寿命可达百岁。
#突破条件# 需达到炼气九层，灵气充盈全身，经脉通畅无阻，方可尝试筑基。

### 筑基期
#定义# 筑基期：修士建立牢固根基，灵力质变的阶段。
#描述# 分为筑基初期、中期、后期。灵力逐渐凝实，修士可引动天地灵气，施展更强大的法术。身体素质大幅增强，寿命显著延长。
#特点# 可短暂御空飞行，使用中级法术，寿命可达二百至三百岁。
#突破条件# 需在筑基后期达到瓶颈，丹田灵力质变，形成灵湖，方可尝试结丹。

## 真人境界

### 结丹期
#定义# 结丹期：体内灵力凝结成金丹，迈入真人行列的重要阶段。
#描述# 分为结丹初期、中期、后期。修士体内丹田凝结金丹，灵力大幅增长，可御空飞行，举手投足间法力澎湃。
#特点# 可自如飞行，使用高级法术，寿命可达五百至八百岁，初步抵抗凡间劫难。
#突破条件# 金丹圆满，神识初步脱离肉身束缚，需经历三灾九劫中的首次天劫，成功渡劫方可进入元婴期。

### 元婴期
#定义# 元婴期：修士凝结元婴，初步脱离肉身束缚的阶段。
#描述# 分为元婴初期、中期、后期。元婴如婴儿般大小，为修士真灵所在，可短暂离体活动。
#特点# 可千里传音，瞬息千里，使用秘法神通，寿命可达一千五百岁，具备一定法则领悟能力。
#突破条件# 元婴圆满，需渡过元婴天劫，元婴与肉身进一步融合，才能进入化神期。

## 仙人预备境界

### 化神期
#定义# 化神期：元神初成，开始领悟天地法则的阶段。
#描述# 分为化神初期、中期、后期。修士元神初步形成，对天地法则有了更深入的理解，可以初步运用部分法则之力。
#特点# 可瞬移短距，操控天地元素，抵御一般仙人法宝攻击，寿命可达三千岁。
#突破条件# 需领悟至少一种天地法则至小成，渡过化神天劫，元神进一步凝实，方可晋升炼虚期。

### 炼虚期
#定义# 炼虚期：元神凝实，虚实转化的关键阶段。
#描述# 修士此时已经有能力短暂进入虚空，探索更广阔的天地。对法则的领悟更加深入，可熟练运用多种法则之力。
#特点# 可穿梭虚空，操控多种法则，寿命可达六千岁，具备抗衡低阶仙人的能力。
#突破条件# 需完全掌握至少一种主要法则，并对三种以上辅助法则有所领悟，成功渡过炼虚天劫，方可合体。

### 合体期
#定义# 合体期：元神与肉身高度融合，接近仙人的存在。
#描述# 修士元神与肉身几乎完美结合，具备了接近仙人的能力。对天地法则的领悟达到极高境界，可以轻易改变周围环境的规则。
#特点# 可穿越小世界，创造简单领域，寿命可达万岁，能与低阶仙人抗衡。
#突破条件# 需完全掌握三种以上主要法则，对天地运行规律有深刻理解，成功渡过合体天劫，方可大乘。

### 大乘期
#定义# 大乘期：即将飞升成仙的最后凡间境界。
#描述# 修士已经接近仙人，对天地法则的理解接近圆满，可以在一定区域内制定属于自己的规则。
#特点# 可穿越大世界，创造完整领域，寿命可达数万岁，能与中阶仙人抗衡。
#突破条件# 需领悟天地大道，明晓宇宙规则，渡过最为严苛的渡劫期天劫，方有机会飞升成仙。

## 仙人境界

### 渡劫期
#定义# 渡劫期：度过最终天劫，冲击仙境的关键阶段。
#描述# 修士面临最为严峻的天劫考验，成功则有望飞升成仙，失败则万劫不复。
#特点# 可短暂接触仙界，创造小世界，寿命理论上无限，但实际受天地规则限制。
#突破条件# 成功渡过九九八十一道天劫，肉身与元神彻底蜕变，方可飞升仙界。

### 仙人
#定义# 仙人：超脱凡尘，进入仙界的不朽存在。
#描述# 已经完全脱离凡间束缚，进入全新的仙界体系，开始新的修炼旅程。
#特点# 可穿梭于各大世界，寿命无限，不受凡间规则限制。
#示例# 传说中的三清、西方二圣等都是达到极高境界的仙人。
```

### 2. 世界地理 (world/geography.md)

```markdown
---
title: 修仙世界地理
category: world
keywords: [地理, 山脉, 宗门, 秘境, 灵脉]
importance: high
last_updated: 2025-06-17
---

# 修仙世界地理

## 东土大陆

#定义# 东土大陆：修真世界最大的陆地板块，灵气充沛，宗门林立，是人类修士的主要活动区域。

### 青云山脉
#描述# 位于东土大陆中央地带的庞大山脉，绵延数万里，山中灵气浓郁，孕育了无数天材地宝，是多个顶级宗门的所在地。
#特点# 山脉中心有上古灵脉，终年云雾缭绕，山间瀑布如银河倾泻，处处皆是修炼宝地。
#宗门# 青云宗、天剑门、玄阴派等顶级宗门都建立在青云山脉的主峰之上。
#秘境# 山脉深处隐藏着"万年冰窟"、"火龙洞"等多处秘境，只有特定时节才会开启。

### 东海
#描述# 东土大陆东侧的浩瀚海域，海中岛屿星罗棋布，水族妖兽众多，也隐藏着诸多远古遗迹。
#特点# 海域中心有巨大灵力漩涡，据说连接着海底龙宫。海面时常有灵气风暴，但也伴随着奇珍异宝的出现。
#势力# 东海龙宫是东海最强大的势力，统领着众多水族。陆上修士中以"沧海门"对东海了解最多。
#秘境# "龙宫秘境"每百年开启一次，是众多修士争相进入的宝地。

### 南荒
#描述# 位于东土大陆南部的荒芜之地，气候炎热，多沙漠和火山，但蕴含特殊火属性灵脉。
#特点# 日照强烈，昼夜温差极大，环境恶劣却有独特的火属性修炼资源，如"九阳花"、"赤炎晶"等。
#势力# "烈焰宗"是南荒最强大的宗门，掌握着火系功法，修士多性情刚烈。
#秘境# "火山之心"是南荒最危险也最珍贵的秘境，据说内藏火系至宝"南明离火"。

### 西域
#描述# 东土大陆西部的神秘区域，多高原和峡谷，灵气稀薄但蕴含奇特的空间之力。
#特点# 风沙肆虐，峡谷纵横，常有空间裂缝出现，可能通向未知世界。
#势力# "星辰阁"是西域唯一的大型宗门，专精空间和星象之术。
#秘境# "时空乱流区"是西域最著名的秘境，进入者可能遭遇时间加速或减慢的奇特现象。

### 北冥
#描述# 东土大陆最北部的冰雪世界，终年被冰雪覆盖，却有上古寒冰灵脉。
#特点# 极寒环境下孕育了珍贵的寒属性灵物，如"万年寒冰髓"、"雪魄丹"等。
#势力# "冰封谷"是北冥地区最神秘的宗门，修炼者寥寥，但每一位都实力非凡。
#秘境# "九幽冰窟"是北冥核心秘境，相传内藏有上古大能留下的"太阴寒经"。

## 中央圣地

#定义# 中央圣地：东土大陆的核心区域，灵气最为浓郁，是最强大的几个宗门的所在地，也是众多修士向往的圣地。

### 太虚峰
#描述# 中央圣地最高的山峰，直插云霄，山顶常年云雾缭绕，据说可通天界。
#特点# 山峰周围灵气如海，形成独特的灵气漩涡，是修炼的绝佳场所。
#宗门# "太虚观"建立在峰顶，是道家最强宗门，以悠久历史和渊博典籍著称。
#秘境# 山腰"太虚洞天"每十年开放一次，内藏无数修炼资源和上古传承。

### 昆仑山
#描述# 传说中的神山，横跨东西，被认为是天地灵脉的汇聚之处。
#特点# 山中四季如春，灵兽遍地，有"仙境在人间"之称。
#宗门# "昆仑派"是最古老的修真宗门之一，传承数万年，底蕴深厚。
#秘境# "昆仑镜湖"是著名秘境，湖水可映照修士内心，助其领悟大道。

## 海外诸岛

#定义# 海外诸岛：东海之外的神秘岛屿群，多为独立小世界，各有特色，是寻求奇遇的修士常去之处。

### 蓬莱岛
#描述# 传说中的仙山之一，四面环海，岛上灵气如云，有延年益寿之效。
#特点# 岛上植物多有药性，动物多通灵性，是炼丹师梦寐以求的宝地。
#势力# 岛上无固定宗门，但有"蓬莱仙医"传承，专精医道和丹道。
#秘境# "蓬莱药园"是最珍贵的秘境，据说连不死药都能在此寻得。

### 瀛洲
#描述# 被迷雾常年环绕的神秘岛屿，只有特定时节才能找到入口。
#特点# 岛上时间流速与外界不同，一日岛内可能相当于外界一年。
#势力# "时光楼"是岛上唯一的修真势力，修炼者善于推演过去未来。
#秘境# "时间长河"是瀛洲核心秘境，据说可以窥见历史长河中的片段。

## 秘境与洞天

#定义# 秘境与洞天：修真世界中的特殊空间，往往与主世界相连却又相对独立，内部时间流速、空间法则可能与外界不同，多蕴含奇珍异宝和上古传承。

### 天绝秘境
#描述# 每百年开启一次的超级秘境，据说是上古大能遗留的洞天福地。
#特点# 内部空间广阔如一小世界，资源丰富，但也危机四伏。
#规则# 秘境开启时间为一个月，期间进入者需自行寻找出口，超时未出者将永远被困。
#传说# 秘境最深处有"天绝台"，能够获得台上传承者据说可得惊天机缘。

### 九幽冥府
#描述# 传说中通往阴间的通道，是鬼修和阴属性修士的修炼圣地。
#特点# 阴气浓郁，常人难以承受，但对修炼阴属性功法的修士却是大补。
#规则# 入口在特定月相下的特定地点才会显现，进入者需持有"引魂灯"才能找到归路。
#传说# 冥府最深处有"生死簿"，据说能窥见自身命运，但代价极大。
```

### 3. 身份背景 (characters/identities.md)

```markdown
---
title: 修仙世界身份背景
category: characters
keywords: [身份, 背景, 散修, 宗门, 家族]
importance: high
last_updated: 2025-06-17
---

# 修仙世界身份背景

## 修真者身份类型

### 散修
#定义# 散修：不依附任何宗门或家族的独立修炼者。
#描述# 散修自由自在，不受宗门规矩束缚，但缺乏系统指导和资源支持，修炼进度常较为缓慢。然而，也有天资卓绝或机缘巧合的散修成就非凡。
#特点# 行动自由，机缘靠自己把握，起点较低但潜力不受限制。
#优势# 不受宗门规则限制，可自由选择功法路线，善于抓住各种机会。
#劣势# 缺乏高级功法和丹药，没有强大背景保护，常遭欺凌。
#出路# 可通过奇遇加入宗门，或坚持独立修炼，自创流派。
#典型职业# 游方修士、赏金猎人、自由炼丹师、独行侠等。

### 宗门弟子
#定义# 宗门弟子：各大修真宗门的入门修士，按资质和贡献分为内外门弟子、核心弟子等。
#描述# 宗门弟子享有宗门资源和庇护，有系统修炼指导，但需遵守宗规门规，完成宗门任务。
#特点# 起点较高，有稳定的修炼环境和资源，但自由度相对较低。
#级别#
- 外门弟子：资质一般或刚入门的弟子，能获得基础资源和指导。
- 内门弟子：表现优秀的弟子，可学习更高级功法，获得更多修炼资源。
- 核心弟子：资质卓绝或立下大功的精英弟子，能接触宗门核心传承。
- 真传弟子：宗门未来继承人选，由长老或掌门亲自教导。
#宗门类型#
- 正道宗门：如"青云宗"、"天剑门"等，崇尚正义，与邪道对立。
- 中立宗门：如"万象阁"、"神农谷"等，不参与正邪之争，专注自身发展。
- 魔道宗门：如"血煞教"、"幽冥宫"等，行事狠辣，不择手段追求力量。
#出路# 成为宗门长老，或分支建立新派，或成为掌门继承人。

### 世家子弟
#定义# 世家子弟：出身于古老修真家族的修炼者，世代传承修真血脉和秘法。
#描述# 世家子弟含着金钥匙出生，从小接受系统修炼，家族底蕴深厚，但也常受家族政治和责任所累。
#特点# 起点最高，资源丰富，血脉优势明显，但肩负家族使命，自由最受限。
#家族类型#
- 古老世家：如"李氏家族"、"云阁世家"等，传承数千年，底蕴深厚。
- 新兴家族：如"霜月家"、"铁衣世家"等，崛起不久但发展迅速。
- 皇族：如"大周皇室"、"天元帝族"等，世俗权力与修真力量并重。
#职责# 需保护家族利益，延续血脉传承，提升家族地位。
#出路# 成为家族核心成员，或外出建立分支，或联姻提升家族地位。

### 隐世宗师
#定义# 隐世宗师：高深莫测的独行大能，不问世事，隐居修行。
#描述# 隐世宗师多为厌倦纷争或追求更高境界的强大修士，隐居深山或秘境，很少参与俗世事务。
#特点# 实力强大，常有特殊传承或见解，偶尔收徒但要求极高。
#隐居地# 多选择灵气浓郁且人迹罕至的地方，如"九重天峰"、"忘忧谷"等。
#出山条件# 一般只有天地异变、旧友危难或遇到真正惊才绝艳的弟子才会出山。
#出路# 寻求飞升，或等待有缘人传承衣钵。

### 秘境生灵
#定义# 秘境生灵：出生或长期生活在特殊秘境中的修炼者，常具有独特体质或能力。
#描述# 秘境生灵由于长期受秘境特殊环境影响，往往具备独特天赋，但对外界了解有限。
#特点# 具有与秘境相关的特殊能力，如"火山秘境"生灵天生亲和火属性。
#适应问题# 初入外界常不适应，需要时间调整自身灵力与外界环境的平衡。
#出路# 可成为秘境守护者，或外出寻求更广阔的修炼道路。

## 特殊身份

### 转世仙人
#定义# 转世仙人：曾经飞升后因某种原因转世重修的存在。
#描述# 转世仙人前世多为仙界强者，因触犯天条或自愿体验凡尘而转世，初期记忆多被封印。
#特点# 悟性超绝，修炼速度惊人，常有前世残留的特殊印记或能力。
#觉醒# 随着修为提升，逐渐恢复前世记忆和部分能力，彻底觉醒后实力暴增。
#危机# 往往伴随前世的恩怨和危机，需面对仙界追杀或旧敌寻仇。
#出路# 重返仙界，或在凡间开创新的道路。

### 妖兽修士
#定义# 妖兽修士：修炼成人形的妖兽，或与妖兽血脉融合的人类修士。
#描述# 妖兽修士兼具人类智慧和妖兽天赋，在某些领域具有先天优势。
#特点# 肉身强大，元神特异，具有变化本体的能力，但也常面临血脉不稳的困扰。
#类型#
- 纯血妖修：完全由妖兽修炼成人形，保留全部妖兽特性和能力。
- 混血修士：人类与妖兽结合的后代，拥有部分妖兽天赋。
- 血脉融合者：通过特殊秘法将妖兽血脉融入体内的人类修士。
#社会地位# 在不同地区待遇差异巨大，有些地方平等相处，有些地方歧视排斥。
#出路# 可成为人妖两族的桥梁，或寻找纯净血脉提升自身潜力。

### 器灵转世
#定义# 器灵转世：古老法宝中诞生的灵智，获得肉身重生的特殊存在。
#描述# 器灵经历漫长岁月孕育出独立灵智，通过特殊机缘获得肉身，开始修炼之路。
#特点# 对法宝炼制和器道有超凡理解，常保留与原法宝属性相关的特殊能力。
#局限# 初期对人类情感和社会关系理解有限，需要适应和学习。
#心结# 常对原主人有复杂感情，或寻求自身存在的意义。
#出路# 成为顶尖炼器师，或寻找回归本源的方式。

### 化形生灵
#定义# 化形生灵：天地灵气孕育或特殊物质经年累月吸收灵气而生的生灵。
#描述# 包括花草成精、山石化灵等，不同于传统妖兽，往往与诞生环境紧密相连。
#特点# 天生亲和特定属性灵力，寿命悠长，但修炼进度通常缓慢。
#种类#
- 植物化形：如"千年灵芝"、"万年古松"等，性情温和，擅长生机类能力。
- 矿物化形：如"金精灵"、"玉石仙"等，体魄坚固，能力与矿物属性相关。
- 天地精灵：如"雷精"、"风灵子"等，由单一元素凝聚而成的精灵。
#局限# 常受原形制约，离开诞生地过远或过久可能影响修为和生命力。
#出路# 寻求完全蜕变成独立生灵，或守护原生之地成为地脉守护者。
```

### 4. 修炼功法 (cultivation/techniques.md)

```markdown
---
title: 修仙功法体系
category: cultivation
keywords: [功法, 法术, 修炼, 心法, 武技]
importance: high
last_updated: 2025-06-17
---

# 修仙功法体系

## 功法分类

### 按修炼路线分类

#### 丹道修炼
#定义# 丹道修炼：以炼气化精、炼精化神为主的修炼方法，注重内在丹田的淬炼和扩展。
#描述# 丹道修炼者通过吸收天地灵气淬炼自身丹田，逐步凝结金丹、元婴，是最为主流的修炼方式。
#特点# 进阶稳定，基础扎实，适合大多数修士。
#代表功法# 《太上丹经》、《九转金丹诀》、《玄阳炼气术》。
#修炼难点# 需气息绵长，心性稳定，丹田积累过程漫长。

#### 剑修之道
#定义# 剑修之道：以剑为媒介，凝聚意志和灵力的修炼方式。
#描述# 剑修以剑为伴，修炼剑气和剑意，锻炼心神合一的境界，追求"人剑合一"的至高境界。
#特点# 攻击犀利，速度极快，战斗力在同阶修士中名列前茅。
#代表功法# 《青云剑诀》、《万剑归宗》、《太虚剑意》。
#修炼难点# 心性要求高，容易走火入魔，需悟性过人。

#### 体修之路
#定义# 体修之路：以锻炼肉身为主，追求强大体魄的修炼方式。
#描述# 体修通过特殊功法和锻炼方式强化肉身，使血肉筋骨达到超凡境界，有些高阶体修甚至肉身可抗仙器。
#特点# 防御力超强，生命力顽强，不惧法术攻击。
#代表功法# 《金刚不坏体》、《太古炼体诀》、《九阳淬体功》。
#修炼难点# 过程极为痛苦，需承受常人难以想象的锻体之苦。

#### 符道修炼
#定义# 符道修炼：以符箓为媒介，驾驭天地之力的修炼方式。
#描述# 符修通过研习符文和法则，将灵力凝于符箓之中，可随时激发强大法术，是辅助和控制系的上佳选择。
#特点# 手段多变，准备充分时战力惊人，但临场发挥受限。
#代表功法# 《天罡符经》、《五雷正法》、《八荒符箓》。
#修炼难点# 需记忆大量符文，手诀繁复，对灵力控制精度要求高。

#### 阵法之道
#定义# 阵法之道：研习和布置阵法，控制特定区域力量的修炼方式。
#描述# 阵法师通过特定排列的法器、符文或灵材，创造出强大的能量场，可用于攻击、防御或辅助。
#特点# 团战能力强，控场能力一流，但单打独斗较弱。
#代表功法# 《奇门遁甲》、《九宫八卦阵》、《星辰大阵》。
#修炼难点# 需深厚的理论基础，精确的空间感知，大量的实践经验。

### 按属性分类

#### 五行属性
#定义# 五行属性：金、木、水、火、土五种基本元素属性的功法体系。
#描述# 五行功法是最基础也最常见的属性功法，每种属性都有其特点和相生相克关系。
#相生关系# 木生火，火生土，土生金，金生水，水生木。
#相克关系# 木克土，土克水，水克火，火克金，金克木。
#代表功法#
- 金属性：《金光锻体诀》、《金刚不坏功》
- 木属性：《青木长生功》、《万木生春诀》
- 水属性：《太阴水经》、《玄冰心法》
- 火属性：《烈焰焚天功》、《九阳真经》
- 土属性：《大地磐石诀》、《黄土真形功》

#### 特殊属性
#定义# 特殊属性：超越五行的特殊元素或概念属性的功法。
#描述# 特殊属性功法往往更为稀有和强大，修炼难度也更高，但潜力巨大。
#种类#
- 雷属性：《九天玄雷诀》、《紫电惊雷功》
- 风属性：《狂风绝息功》、《无相风体》
- 空间属性：《虚空遁法》、《乾坤挪移术》
- 时间属性：《逆流时光诀》、《瞬息千年功》
- 光明属性：《太阳真火》、《圣光普照诀》
- 黑暗属性：《幽冥魔典》、《暗影潜行术》

### 按来源分类

#### 仙界传承
#定义# 仙界传承：直接源自仙界或上古仙人的功法。
#描述# 仙界传承的功法往往威力强大，体系完整，但对修炼者资质和悟性要求极高。
#特点# 修炼难度大，但潜力无限，常有特殊神通附带。
#代表功法# 《太上忘情录》、《三清道典》、《西方净土经》。
#获得方式# 机缘巧合下的仙人赠予，或在上古遗迹中的偶然发现。

#### 宗门心法
#定义# 宗门心法：各大宗门世代相传的核心功法。
#描述# 宗门心法经过代代传承和完善，体系严谨，修炼路径清晰，是大多数修士的主修功法。
#特点# 修炼难度适中，配套修炼资源齐全，进阶稳定。
#代表功法# 《青云决》(青云宗)、《天剑心经》(天剑门)、《幽冥真解》(幽冥宫)。
#获得方式# 拜入相应宗门，达到要求的修为和贡献。

#### 自创功法
#定义# 自创功法：修真者基于自身理解和经验创造的独特功法。
#描述# 自创功法因人而异，有的粗糙有的精妙，但都极为契合创造者自身。
#特点# 个性化强，针对性好，但可能存在隐患或瓶颈。
#代表人物# "无名剑修"的《一剑飞仙》、"火云老祖"的《火云真功》。
#创造条件# 需要深厚的修炼基础，对天地法则的独特理解，以及反复验证和完善的过程。

## 典型功法详解

### 《太上丹经》
#类型# 丹道功法
#等级# 仙级
#属性# 无属性（中正平和）
#修炼阶段#
1. 凝气期：吸收天地灵气，淬炼己身
2. 筑基期：灵气凝结成露，滋养经脉
3. 金丹期：丹田结丹，灵力质变
4. 元婴期：元婴成形，神识壮大
5. 化神期：神形合一，领悟法则
#特殊效果# 修炼到高阶可获得"太上忘情"境界，超脱七情六欲，寿元大增。
#适合人群# 资质平均，心性稳定的修炼者。
#传承者# "太上道人"、"清虚真人"等道家大能。

### 《青云剑诀》
#类型# 剑修功法
#等级# 地级上品
#属性# 风、雷双属性
#修炼阶段#
1. 入门：凝练剑气，与佩剑建立初步联系
2. 小成：剑气外放，可隔空伤敌
3. 大成：人剑合一，剑随心动
4. 圆满：领悟剑意，一念斩敌
#特殊效果# 修炼至大成可使用"青云一气剑"，剑气纵横三千里。
#适合人群# 心性坚定，悟性高，喜爱剑道的修炼者。
#传承者# 青云宗历代剑修，最著名的是"青云剑仙"张太虚。

### 《金刚不坏体》
#类型# 体修功法
#等级# 地级中品
#属性# 金、土双属性
#修炼阶段#
1. 铜皮期：皮肤如铜，可抵御一般兵刃
2. 铁骨期：骨骼坚固，力大无穷
3. 金身期：全身如金刚，普通法宝难伤
4. 不坏期：刀枪不入，水火不侵
#特殊效果# 修炼至不坏期可短时间内进入"金刚怒目"状态，战力倍增。
#适合人群# 体魄强健，意志坚定，能忍受剧痛的修炼者。
#传承者# "金刚寺"历代高僧，以及散修中的体修大能"铁臂尊者"。
```

## 知识库预处理

### 向量化步骤

1. **文档分段**：将文档按照一定的段落大小切分，确保每个段落的上下文完整性
2. **元数据标记**：为每个段落添加来源、类别等元数据信息
3. **特殊标签处理**：解析和保留文档中的特殊标签（如`#定义#`，`#描述#`等）
4. **向量化**：使用LangChain和OpenAI的embedding模型将文本转换为向量表示
5. **索引建立**：构建向量索引，支持相似度检索

### 索引结构

```python
class KnowledgeItem:
    """知识条目"""
    text: str                      # 原始文本内容
    embedding: List[float]         # 向量表示
    metadata: Dict[str, Any]       # 元数据
    source_file: str               # 源文件
    category: str                  # 分类
    keywords: List[str]            # 关键词
    special_tags: Dict[str, str]   # 特殊标签内容
```

## 知识库使用规范

### RAG检索策略

```python
def retrieve_knowledge(query: str, character_state: Dict, game_context: Dict) -> List[KnowledgeItem]:
    """检索相关知识
    
    参数:
        query: 原始查询
        character_state: 角色状态
        game_context: 游戏上下文
        
    返回:
        List[KnowledgeItem]: 相关知识条目列表
    """
    # 1. 构建增强查询
    enhanced_query = f"{query} {character_state['cultivation_stage']} {character_state['identity']}"
    
    # 2. 添加上下文信息
    if game_context.get('location'):
        enhanced_query += f" {game_context['location']}"
    
    # 3. 检索知识
    items = vector_store.similarity_search(enhanced_query, k=5)
    
    # 4. 过滤和排序
    items = filter_by_relevance(items, threshold=0.7)
    items = sort_by_importance(items)
    
    return items
```

### 内容生成指南

1. **剧情生成**：基于检索到的世界观和角色信息，生成符合当前情境的剧情描述
2. **选择项生成**：基于角色能力和环境提供3-5个合理的选择项，确保每个选择项都有明确的后果
3. **结果生成**：基于玩家选择和角色状态，生成合理的结果描述和状态变化

## 初始知识库

初始知识库应重点包含以下核心内容：

1. **基础世界观**：修仙世界的基本规则、地理环境、势力分布
2. **修炼体系**：修仙境界、基本功法、修炼资源
3. **角色身份**：可选身份背景、起始属性特点
4. **基础情节**：初始剧情、常见遭遇、基本任务

这些内容将作为MVP阶段RAG系统的基础知识来源，后续可以逐步扩充。

## 知识库扩展计划

随着游戏开发的深入，知识库应当按以下优先级逐步扩充：

1. **更详细的修炼功法**：增加各种属性和流派的功法详解
2. **多样化的事件和遭遇**：添加更多可能的剧情分支和随机事件
3. **丰富的NPC角色**：增加重要NPC的背景和特点描述
4. **秘境和宝物**：添加更多特殊地点和珍稀物品的描述
5. **历史和传说**：补充世界背景故事和传说典故

这个知识库建设指南为AI开发团队提供了构建修仙游戏知识基础的框架和内容示例。